<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<title>Carnet de Confirmaciones - Rangel RehabilitaciÃ³n</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f3f4f6;
      margin: 0;
      padding: 0px;
      color: #333;
    }
    .card {
      width: 720px;
      margin: auto;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 30px;
      border-top: 10px solid #2C2474;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0px;
    }
    .logo {
      height: 100px;
    }
    .title {
      color: #2C2474;
      font-size: 1.5rem;
      font-weight: bold;
    }
    table.details, table.schedule {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table.details td {
      padding: 6px 12px;
    }
    table.schedule th {
      background-color: #2C2474;
      color: white;
      padding: 2px;
      font-size: 0.85rem;
    }
    table.schedule td {
      border: 1px solid #ccc;
      text-align: center;
      padding: 4px;
    }
    table.schedule input[type="time"] {
      width: 100%;
      font-size: 0.6rem;
    }
    .footer {
      margin-top: 1px;
      font-size: 0.9rem;
      text-align: center;
      color: #666;
    }
    .signature {
      margin-top: 5px;
      font-weight: bold;
    }
    .buttons {
      margin-top: 1px;
      text-align: center;
    }
    .buttons button {
      margin: x;
      padding: 10px 20px;
      background-color: #2C2474;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .buttons button:hover {
      background-color: #1b174d;
    }
    input[type="time"]::placeholder {
      color: transparent;
    }
    input[type="time"] {
      color: transparent;
    }
    input[type="time"]:valid {
      color: black;
    }
    @media print {
      .buttons {
        display: none !important;
      }
      input[type="time"]:not(:valid) {
        color: white !important;
      }
    }
    #pdf-success {
      display: none;
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #2C2474;
      color: white;
      padding: 20px 30px;
      border-radius: 10px;
      font-size: 1.2rem;
      box-shadow: 0 4px 1212px rgba(0, 0, 0, 0.3);
      z-index: 9999;
    }
  
    @media print {
      .no-print { display: none !important; }
    }
</style>
</head>
<body>
<div class="card" id="carnet">
<div class="header">
<img alt="Logo Rangel" class="logo" src="https://i.ibb.co/YBRTC8HX/LOGO-RANGEL-PAGINA.png"/>
<div class="title">Cronograma de citas</div>
</div>
<style>
  .form-container {
    font-family: Arial, sans-serif;
    font-size: 13px;
    max-width: 800px;
    margin: auto;
  }

  fieldset {
    border: 1px solid #ccc;
    padding: 0.00001px 12px;
    margin-bottom: 0.1px;
  }

  legend {
    font-weight: bold;
    font-size: 10px;
    padding: 0 5px;
  }

  .form-row {
    display: flex;
    flex-wrap: wrap;
    gap: 100px;
    margin-bottom: 6px;
  }

  .form-group {
    flex: 1 1 10%;
    display: flex;
    flex-direction: column;
  }

  label {
    font-weight: bold;
    margin-bottom: px;
    white-space: nowrap;
  }

  input[type="text"],
  input[type="date"],
  select {
    padding: 1px 5px;
    font-size: 11px;
    width: 100%;
    box-sizing: border-box;
  }
</style>
<div class="form-container">
<fieldset>
<legend>Datos personales</legend>
<div class="form-row">
<div class="form-group">
<label>Nombre:</label>
<input type="text" value="Eliz Caballero LÃ³pez"/>
</div>
<div class="form-group">
<label>Documento:</label>
<input type="text" value="1044233415"/>
</div>
</div>
</fieldset>
<fieldset>
<legend>InformaciÃ³n del programa</legend>
<div class="form-row">
<div class="form-group">
<label>Convenio:</label>
<input type="text" value="Cuidarte"/>
</div>
<div class="form-group">
<label>Intensidad -No. Sesiones:</label>
<input type="text" value="3,5 sesiones a la semana"/>
</div>
<div class="form-group">
<label>Fecha de inicio:</label>
<input type="date"/>
</div>
</div>
</fieldset>
</div>
<div class="no-print" style="margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-radius: 8px; border: 1px solid #ddd;">
<label><input checked="" class="col-toggle" data-col="fisica" type="checkbox"/> Terapia FÃ­sica</label>
<label style="margin-left: 15px;"><input checked="" class="col-toggle" data-col="ocupacional" type="checkbox"/> Terapia Ocupacional</label>
<label style="margin-left: 15px;"><input checked="" class="col-toggle" data-col="psicologia" type="checkbox"/> PsicologÃ­a</label>
<label style="margin-left: 15px;"><input checked="" class="col-toggle" data-col="neuro" type="checkbox"/> Terapia NeuropsicologÃ­a</label>
</div>
<table class="schedule">
<tr>
<th>NÂº</th>
<th>Fecha Cita</th>
<th data-col="fisica">Terapia FÃ­sica</th>
<th data-col="ocupacional">Terapia Ocupacional</th>
<th data-col="psicologia">PsicologÃ­a</th>
<th data-col="neuro">Terapia NeuropsicologÃ­a</th></tr>
<tr>
<td>1</td>
<td><input type="date"/></td>
<td data-col="fisica"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="ocupacional"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="psicologia"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="neuro"><input placeholder="Hora y sesiones" type="text"/></td></tr>
<tr>
<td>2</td>
<td><input type="date"/></td>
<td data-col="fisica"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="ocupacional"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="psicologia"><input placeholder="Hora y sesiones" type="text"/></td>
<td data-col="neuro"><input placeholder="Hora y sesiones" type="text"/></td></tr>
</table>
<div class="signature">
    Entregado por: <input placeholder="Nombre quien Entrega el Carnet" type="text"/>
</div>
<div class="signature">
    Observaciones: <input placeholder="" type="text"/>
</div>
<div class="buttons no-print">
<button onclick="generarPDF()">ðŸ“„ Descargar como PDF</button>
<button onclick="limpiarFormulario()">ðŸªŸ Limpiar</button>
<button onclick="agregarFila()">âž• Agregar fila</button></div>
<style>
  .recomendaciones {
    font-size: 0.8rem;
    color: #444;
    margin-top: 20px;
    line-height: 1;
  }
  .recomendaciones a {
    color: #2C2474;
    text-decoration: none;
  }
  .recomendaciones a:hover {
    text-decoration: underline;
  }
</style>
<div class="recomendaciones">
<strong>Recomendaciones:</strong><br/>
  â€¢ Presentarse al menos 20 minutos antes de la hora programada para realizar el proceso de facturaciÃ³n.<br/>
  â€¢ Asistir con ropa cÃ³moda adecuada para la terapia (por ejemplo:pantaloneta, manga corta o segÃºn el Ã¡rea a tratar).<br/>
  â€¢ Llevar una toalla mediana de uso personal para la sesiÃ³n.<br/><br/>
</div>
<div class="footer">
    Rangel RehabilitaciÃ³n Â© 2025 <strong>"Dedicados a la Excelencia"</strong><br/>
<a href="https://rangelrehabilitacion.com.co">www.rangelrehabilitacion.com.co</a>
</div>
</div>
<!-- Banner de Ã©xito -->
<div id="pdf-success">âœ… Carnet generado exitosamente</div>
<script>
  function generarPDF() {
    document.querySelectorAll('.no-print').forEach(el => el.style.display = 'none');

    const timeInputs = document.querySelectorAll('input[type="time"]');
    timeInputs.forEach(input => {
      if (input.value) {
        const time24 = input.value;
        const [hours, minutes] = time24.split(':');
        const ampm = hours < 12 ? 'AM' : 'PM';
        const hour12 = (hours % 12) || 12;
        const time12 = `${hour12}:${minutes} ${ampm}`;

        const timeText = document.createElement('div');
        timeText.innerHTML = `<span><strong>${time12}</strong></span>`;
        timeText.classList.add('time-print');

        input.style.display = 'none';
        input.parentNode.insertBefore(timeText, input.nextSibling);
      }
    });

    const element = document.getElementById('carnet');
    const opt = {
      margin: 0.2,
      filename: 'Carnet_Rangel.pdf',
      image: { type: 'jpeg', quality: 1 },
      html2canvas: { scale: 2, useCORS: true, allowTaint: true },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(element).save().then(() => {
      document.querySelectorAll('.no-print').forEach(el => el.style.display = 'block');
      document.querySelectorAll('.time-print').forEach(el => el.remove());
      timeInputs.forEach(input => input.style.display = 'inline');

      const successBanner = document.getElementById('pdf-success');
      successBanner.style.display = 'block';
      setTimeout(() => {
        successBanner.style.display = 'none';
      }, 3000);
    });
  }

  function limpiarFormulario() {
    document.querySelectorAll('input').forEach(input => {
      if (input.type === 'text' || input.type === 'date' || input.type === 'time') {
        input.value = '';
      }
    });
    document.querySelectorAll('select').forEach(select => {
      select.selectedIndex = 0;
    });
  }

</script>
<script>
document.querySelectorAll('.col-toggle').forEach(checkbox => {
  checkbox.addEventListener('change', function() {
    const colName = this.getAttribute('data-col');
    const show = this.checked;
    document.querySelectorAll('[data-col="' + colName + '"]').forEach(cell => {
      cell.style.display = show ? '' : 'none';
    });
    document.querySelectorAll('th[data-col="' + colName + '"]').forEach(th => {
      th.style.display = show ? '' : 'none';
    });
  });
});
</script>

<!-- FUNCIÃ“N agregarFila arreglada (NO TOCAR nada mÃ¡s) -->
<script>
function agregarFila() {
    const table = document.querySelector('.schedule');
    // ensure tbody exists and move existing rows into it (preserve header)
    let tbody = table.querySelector('tbody');
    if (!tbody) {
        tbody = document.createElement('tbody');
        const rows = Array.from(table.querySelectorAll('tr')).slice(1); // skip header
        rows.forEach(r => tbody.appendChild(r));
        table.appendChild(tbody);
    }

    const rowCount = tbody.querySelectorAll('tr').length;
    const row = document.createElement('tr');

    // NÂº
    const tdNum = document.createElement('td');
    tdNum.textContent = rowCount + 1;
    row.appendChild(tdNum);

    // Fecha Cita
    const tdFecha = document.createElement('td');
    const inputFecha = document.createElement('input');
    inputFecha.type = 'date';
    tdFecha.appendChild(inputFecha);
    row.appendChild(tdFecha);

    // Terapia FÃ­sica
    const tdFisica = document.createElement('td');
    tdFisica.setAttribute('data-col', 'fisica');
    const inputFisica = document.createElement('input');
    inputFisica.placeholder = 'Hora y sesiones';
    inputFisica.type = 'text';
    tdFisica.appendChild(inputFisica);
    if (!document.querySelector('.col-toggle[data-col="fisica"]').checked) tdFisica.style.display = 'none';
    row.appendChild(tdFisica);

    // Terapia Ocupacional
    const tdOcup = document.createElement('td');
    tdOcup.setAttribute('data-col', 'ocupacional');
    const inputOcup = document.createElement('input');
    inputOcup.placeholder = 'Hora y sesiones';
    inputOcup.type = 'text';
    tdOcup.appendChild(inputOcup);
    if (!document.querySelector('.col-toggle[data-col="ocupacional"]').checked) tdOcup.style.display = 'none';
    row.appendChild(tdOcup);

    // PsicologÃ­a
    const tdPsi = document.createElement('td');
    tdPsi.setAttribute('data-col', 'psicologia');
    const inputPsi = document.createElement('input');
    inputPsi.placeholder = 'Hora y sesiones';
    inputPsi.type = 'text';
    tdPsi.appendChild(inputPsi);
    if (!document.querySelector('.col-toggle[data-col="psicologia"]').checked) tdPsi.style.display = 'none';
    row.appendChild(tdPsi);

    // Terapia NeuropsicologÃ­a
    const tdNeuro = document.createElement('td');
    tdNeuro.setAttribute('data-col', 'neuro');
    const inputNeuro = document.createElement('input');
    inputNeuro.placeholder = 'Hora y sesiones';
    inputNeuro.type = 'text';
    tdNeuro.appendChild(inputNeuro);
    if (!document.querySelector('.col-toggle[data-col="neuro"]').checked) tdNeuro.style.display = 'none';
    row.appendChild(tdNeuro);

    tbody.appendChild(row);
}
</script>

</body>
</html>
